<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>테이블 데이터 정렬</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: #f2f2f2;
            cursor: pointer;
            position: relative;
        }
        
        th:hover {
            background-color: #e6e6e6;
        }
        
        .arrow {
            display: inline-block;
            width: 0;
            height: 0;
            margin-left: 5px;
            vertical-align: middle;
        }
        
        .arrow.up {
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 5px solid #333;
        }
        
        .arrow.down {
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid #333;
        }
    </style>
</head>
<body>
    <h1>학생 정보 테이블</h1>
    
    <table id="studentTable">
        <thead>
            <tr>
                <th data-type="text">이름 <span class="arrow"></span></th>
                <th data-type="number">나이 <span class="arrow"></span></th>
                <th data-type="number">점수 <span class="arrow"></span></th>
                <th data-type="text">과목 <span class="arrow"></span></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>김철수</td>
                <td>22</td>
                <td>85</td>
                <td>수학</td>
            </tr>
            <tr>
                <td>이영희</td>
                <td>20</td>
                <td>92</td>
                <td>영어</td>
            </tr>
            <tr>
                <td>박민수</td>
                <td>25</td>
                <td>78</td>
                <td>과학</td>
            </tr>
            <tr>
                <td>정다은</td>
                <td>19</td>
                <td>95</td>
                <td>국어</td>
            </tr>
            <tr>
                <td>최재민</td>
                <td>23</td>
                <td>88</td>
                <td>역사</td>
            </tr>
            <tr>
                <td>강지수</td>
                <td>21</td>
                <td>82</td>
                <td>물리</td>
            </tr>
        </tbody>
    </table>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const table = document.getElementById('studentTable');
            const headers = table.querySelectorAll('th');
            const tbody = table.querySelector('tbody');
            const rows = tbody.querySelectorAll('tr');
            
            // 현재 정렬 상태 (column index, direction)
            let sortState = {
                column: -1,
                ascending: true
            };
            
            // 모든 헤더에 클릭 이벤트 리스너 추가
            headers.forEach((header, columnIndex) => {
                header.addEventListener('click', function() {
                    // 화살표 초기화
                    headers.forEach(h => h.querySelector('.arrow').className = 'arrow');
                    
                    // 정렬 방향 결정
                    if (sortState.column === columnIndex) {
                        sortState.ascending = !sortState.ascending;
                    } else {
                        sortState.column = columnIndex;
                        sortState.ascending = true;
                    }
                    
                    // 화살표 방향 업데이트
                    const arrow = header.querySelector('.arrow');
                    arrow.className = 'arrow ' + (sortState.ascending ? 'up' : 'down');
                    
                    // 데이터 타입 확인
                    const type = header.getAttribute('data-type');
                    
                    // 행 배열로 변환하여 정렬
                    const rowsArray = Array.from(rows);
                    
                    rowsArray.sort((a, b) => {
                        let aValue = a.cells[columnIndex].textContent;
                        let bValue = b.cells[columnIndex].textContent;
                        
                        if (type === 'number') {
                            aValue = parseFloat(aValue);
                            bValue = parseFloat(bValue);
                        }
                        
                        if (sortState.ascending) {
                            return aValue > bValue ? 1 : -1;
                        } else {
                            return aValue < bValue ? 1 : -1;
                        }
                    });
                    
                    // 정렬된 행을 테이블에 다시 추가
                    rowsArray.forEach(row => {
                        tbody.appendChild(row);
                    });
                });
            });
        });
    </script>
</body>
</html>
